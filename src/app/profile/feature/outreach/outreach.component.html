<div>
  @let countByOutreacher = countByOutreacher$ | async;
  @let generateLink = generateLink$ | async;
  @let link = appUrl + 'sign-up?link=' + user()?.outreach_link;
  <p class="mb-4">
    <span class="text-gray-500 font-medium">
      {{ user()?.outreach_link ? 'Voici votre lien de vulgarisation' : 'Aucun lien de vulgarisation' }}
    </span>
  </p>
  @if (user()?.outreach_link) {
    <span class="text-primary-900 font-medium text-sm break-words">
      {{ link }}
    </span>
    <button
      (click)="copyLink(link)"
      class="flex items-center gap-2 text-sm font-medium text-gray-900 bg-gray-200 hover:bg-gray-300 rounded-lg px-4 py-2 mt-4 transition-colors duration-300">
      {{ copied() ? 'Lien copié !' : 'Copier le lien' }}
    </button>
    @if (countByOutreacher?.isLoading) {
      <div class="rounded-md bg-gray-200 animate-pulse h-6 w-full md:w-3/6 mt-6"></div>
    }
    @if (countByOutreacher?.data) {
      <h3 class="font-medium mt-6">
        Nombre d'inscriptions en utilisant mon lien :
        <span class="text-lg font-medium text-primary-900">
          {{ countByOutreacher?.data }}
        </span>
      </h3>
    }
  } @else {
    <button
      (click)="generatePopularizationLink()"
      class="flex items-center gap-2 text-sm font-medium text-gray-900 bg-gray-200 hover:bg-gray-300 rounded-lg px-4 py-2 mt-4 transition-colors duration-300">
      {{ generateLink?.isLoading ? 'Génération du lien...' : 'Générer le lien' }}
    </button>
  }
</div>
